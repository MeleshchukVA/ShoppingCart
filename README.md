# Shopping Cart
## Финальный проект по курсу "iOS Developer" от Газпромбанка и онлайн-школы OTUS

## Требования к проекту
- Проект реализован с использованием нативных средств Apple без добавления сторонних библиотек. 
Подключаем через CocoaPods. Исключение составляют:
  - SwiftLint
  - Опционально для тестов: Sourcery, Cuckoo, Quick/Nimble
  - Опционально для сети: Moya
- Верстка UI осуществляется без использования storyboard/xib (использование anchors и frame)
- Проект должен поддерживать сохранение данных с использованием Core Data
- Проект поддерживает работу с данными через сеть
- При загрузке и отрисовке данных используются анимации
- Архитектура проекта: VIPER
- Минимум 5 экранов
- Обязательное покрытие проекта Unit-тестами (минимум 3 VIPER-сцены и связанные сервисы)
- Минимальная поддерживаемая версия: iOS 12
- Опциональное требование: использовать шиммеры на 1-ом экране

## Краткое описание
Приложение загружает список товаров из сети с возможностью добавить их в корзину и оформить заказ.

## Установка
Для запуска приложения необходимо установить [SwiftLint](https://github.com/realm/SwiftLint) через [CocoaPods](https://cocoapods.org/).

## Стек
- Архитектура: VIPER
- Минимальная поддерживаемая версия: iOS 12
- Верстка приложения: программно
- Работа с сетью: URLSession
- Сохранение данных: 
  - Core Data для корзины товаров
  - UserDefaults для онбординга
- Тесты: XCTest
- Паттерны проектирования:
  - Coordinator для навигации
  - Dependency Injection для сервисов работы с сетью и данными
  - Singleton для сервисов конвертера валют и кеширования картинок;
  - Adapter для работы с UITableView и UICollectionView

## Подробное описание

- Структура проекта (скрины)
- Экраны разбиты на 6 модулей, 5 из них написано на VIPER
- Для увеличения скорости написания модулей на VIPER использовался template-шаблон (ссылка). Шаблон улучшил, убрав force-unwrap и добавив комментарии
- API: https://dummyjson.com/. Для работы с API токены авторизации не требуются
- Экраны: 
  - Экран модуля Onboarding представляет из себя UIPageViewController с 4-мя экранами и анимированной кнопкой "Skip and Go". Экран появляется при первом запуске приложени. При повторном запуске приложения онбординг не показывается. Данные о нем хранятся в UserDefaults
(гифка)

  - Экран модуля Catalogue представляет из себя:
    - UITableView с кастомными ячейками, который отображает категории товаров. Данные о категориях берутся из сети
    - UISearchController для поиска товаров. При успешном поиске отображается UICollectionView с товарами из модуля Product. При неуспешном поиске на экране отображается соответствующая надпись. Поиск также осуществляется с помощью запроса в сеть
(гифка)

  - Экран модуля Product отображается при выборе категории из модуля Catalogue. Экран представляет из себя UICollectionView с кастомными ячейками. Данные о товаре берутся из сети. Если товары в категории отсутсвуют, отображается соответствующая надпись. При нажатии на кнопку корзины:
    - Данные о товаре сохраняются в Core Data и отображаются на экране модуля Cart
    - Увеличивается счетчик товаров в UITabBarController
(гифка)

  - Экран модуля Cart представляет из себя:
    - UITableView с кастомными ячейками. Данные о товарах в корзине сохраняются в Core Data и доступны после перезапуска приложения. В корзине можно увеличить или уменьшить число товаров, после чего отобразится соответствующая цена. Есть возможность удалить товары и поделиться ими через UIAlertViewController
    - Кнопку Checkout, при нажатии на которую вызывается модуль Checkout
(гифка)
  
  - Экран модуля Checkout представляет из себя ModalView c:
    - UITableView с кастомными ячейками, который отображает список товаров, цену и их количество. Данные берутся из Core Data
    - Кнопку Buy. Если интернет доступен, то отобразится UIAlertViewController с надписью Success. При нажатии на кнопку OK экран модуля закрывается. Если интернет недоступен, то отобразится соответствующая ошибка в алерте
(гифка)  

  - Экран модуля Profile представляет из себя  экран, на котором отображается информация о пользовтеле. Данные для экрана берутся из сети
(гифка)

- Анимации:
  - В приложении отображается анимация загрузки данных с помощью UIActivityIndicator как на экранах приложения, так и на картинках товаров
  - Анимированы кнопки добавления в корзину
  - Анимированы ячейки с товарами при нажатии на них 
(гифки)

- Обработаны исключения в приложении при отсутствии сети 
(гифки)

- Приложение запускается, начиная с iOS 12 
(куча скринов со всеми версиями iOS)

- Для запросов в сеть реализованы POST и GET запросы
- Использован extension ReuseIdentifier для ячеек UITableView и UICollectionView, чтобы не писать айдентифаеры каждый раз для них
- Для кэширования картинок использован один класс из LRUCache (ссылка). "Обертка" для класса написана самостоятельно
- Количество строк кода: 7066

## Что можно улучшить/добавить:
- Добавить экран с подробным описанием товара, кнопкой покупки и возможностью выбора количества товара при нажатии на кнопку покупки;
- Улучшить поиск по товарам;
- Настроить увеличение счетчика товаров в таббаре и корзине, если нажать на кнопку корзины для одного и того же товара;
- В случае, если уменьшается количество товара до 0, удалять ячейку таблицы на экране с корзиной;
- Добавить swipe to deletе для товара на экране с корзиной;
- Покрыть приложение большим количеством тестов.
